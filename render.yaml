# Render Blueprint Configuration
# Deploy at: https://render.com/docs/infrastructure-as-code

services:
  - type: web
    name: rescuefinder
    runtime: node
    plan: free # Free tier - sleeps after 15 min inactivity. Use "starter" ($7/mo) for always-on
    buildCommand: npm install && npx prisma generate && npx prisma db push && npm run build
    startCommand: npm start
    healthCheckPath: /api/scrape-status
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: rescuefinder-db
          property: connectionString
      - key: NEXT_PUBLIC_BASE_URL
        sync: false # Set manually in Render dashboard

databases:
  - name: rescuefinder-db
    plan: free # Free tier - 90 day expiry, then need to upgrade or recreate
    databaseName: rescuefinder
    user: rescuefinder_user
